function [ LOOPdataset ] = evalLOOPdataset( path_gt, path_result , mode, LOOPdataset)


if (isequal(mode,'dso_default'))
    names = {     ...
    'KeyFrameTrajectory_DSO_full_01' ...
    'KeyFrameTrajectory_DSO_full_02' ...
    'KeyFrameTrajectory_DSO_full_03' ...
    'KeyFrameTrajectory_DSO_full_04' ...
    'KeyFrameTrajectory_DSO_full_05' ...
    'KeyFrameTrajectory_DSO_full_06' ...
    'KeyFrameTrajectory_DSO_full_07' ...
    'KeyFrameTrajectory_DSO_full_08' ...
    'KeyFrameTrajectory_DSO_full_09' ...
    'KeyFrameTrajectory_DSO_full_10' ...
    'KeyFrameTrajectory_DSO_full_11' ...
    'KeyFrameTrajectory_DSO_full_12' ...
    'KeyFrameTrajectory_DSO_full_13' ...
    'KeyFrameTrajectory_DSO_full_14' ...
    'KeyFrameTrajectory_DSO_full_15' ...
    'KeyFrameTrajectory_DSO_full_16' ...
    'KeyFrameTrajectory_DSO_full_17' ...
    'KeyFrameTrajectory_DSO_full_18' ...
    'KeyFrameTrajectory_DSO_full_19' ...
    'KeyFrameTrajectory_DSO_full_20' ...
    'KeyFrameTrajectory_DSO_full_21' ...
    'KeyFrameTrajectory_DSO_full_22' ...
    'KeyFrameTrajectory_DSO_full_23' ...
    'KeyFrameTrajectory_DSO_full_24' ...
    'KeyFrameTrajectory_DSO_full_25' ...
    'KeyFrameTrajectory_DSO_full_26' ...
    'KeyFrameTrajectory_DSO_full_27' ...
    'KeyFrameTrajectory_DSO_full_28' ...
    'KeyFrameTrajectory_DSO_full_29' ...
    'KeyFrameTrajectory_DSO_full_30' ...
    'KeyFrameTrajectory_DSO_full_31' ...
    'KeyFrameTrajectory_DSO_full_32' ...
    'KeyFrameTrajectory_DSO_full_33' ...
    'KeyFrameTrajectory_DSO_full_34' ...
    'KeyFrameTrajectory_DSO_full_35' ...
    'KeyFrameTrajectory_DSO_full_36' ...
    'KeyFrameTrajectory_DSO_full_37' ...
    'KeyFrameTrajectory_DSO_full_38' ...
    'KeyFrameTrajectory_DSO_full_39' ...
    'KeyFrameTrajectory_DSO_full_40' ...
    'KeyFrameTrajectory_DSO_full_41' ...
    'KeyFrameTrajectory_DSO_full_42' ...
    'KeyFrameTrajectory_DSO_full_43' ...
    'KeyFrameTrajectory_DSO_full_44' ...
    'KeyFrameTrajectory_DSO_full_45' ...
    'KeyFrameTrajectory_DSO_full_46' ...
    'KeyFrameTrajectory_DSO_full_47' ...
    'KeyFrameTrajectory_DSO_full_48' ...
    'KeyFrameTrajectory_DSO_full_49' ...
    'KeyFrameTrajectory_DSO_full_50' ...
    };
elseif (isequal(mode,'dso_reduced'))
    names = {     ...
    'KeyFrameTrajectory_DSO_half_01' ...
    'KeyFrameTrajectory_DSO_half_02' ...
    'KeyFrameTrajectory_DSO_half_03' ...
    'KeyFrameTrajectory_DSO_half_04' ...
    'KeyFrameTrajectory_DSO_half_05' ...
    'KeyFrameTrajectory_DSO_half_06' ...
    'KeyFrameTrajectory_DSO_half_07' ...
    'KeyFrameTrajectory_DSO_half_08' ...
    'KeyFrameTrajectory_DSO_half_09' ...
    'KeyFrameTrajectory_DSO_half_10' ...
    'KeyFrameTrajectory_DSO_half_11' ...
    'KeyFrameTrajectory_DSO_half_12' ...
    'KeyFrameTrajectory_DSO_half_13' ...
    'KeyFrameTrajectory_DSO_half_14' ...
    'KeyFrameTrajectory_DSO_half_15' ...
    'KeyFrameTrajectory_DSO_half_16' ...
    'KeyFrameTrajectory_DSO_half_17' ...
    'KeyFrameTrajectory_DSO_half_18' ...
    'KeyFrameTrajectory_DSO_half_19' ...
    'KeyFrameTrajectory_DSO_half_20' ...
    'KeyFrameTrajectory_DSO_half_21' ...
    'KeyFrameTrajectory_DSO_half_22' ...
    'KeyFrameTrajectory_DSO_half_23' ...
    'KeyFrameTrajectory_DSO_half_24' ...
    'KeyFrameTrajectory_DSO_half_25' ...
    'KeyFrameTrajectory_DSO_half_26' ...
    'KeyFrameTrajectory_DSO_half_27' ...
    'KeyFrameTrajectory_DSO_half_28' ...
    'KeyFrameTrajectory_DSO_half_29' ...
    'KeyFrameTrajectory_DSO_half_30' ...
    'KeyFrameTrajectory_DSO_half_31' ...
    'KeyFrameTrajectory_DSO_half_32' ...
    'KeyFrameTrajectory_DSO_half_33' ...
    'KeyFrameTrajectory_DSO_half_34' ...
    'KeyFrameTrajectory_DSO_half_35' ...
    'KeyFrameTrajectory_DSO_half_36' ...
    'KeyFrameTrajectory_DSO_half_37' ...
    'KeyFrameTrajectory_DSO_half_38' ...
    'KeyFrameTrajectory_DSO_half_39' ...
    'KeyFrameTrajectory_DSO_half_40' ...
    'KeyFrameTrajectory_DSO_half_41' ...
    'KeyFrameTrajectory_DSO_half_42' ...
    'KeyFrameTrajectory_DSO_half_43' ...
    'KeyFrameTrajectory_DSO_half_44' ...
    'KeyFrameTrajectory_DSO_half_45' ...
    'KeyFrameTrajectory_DSO_half_46' ...
    'KeyFrameTrajectory_DSO_half_47' ...
    'KeyFrameTrajectory_DSO_half_48' ...
    'KeyFrameTrajectory_DSO_half_49' ...
    'KeyFrameTrajectory_DSO_half_50' ...
    };
elseif (isequal(mode,'orb_vo'))
    names = {     ...
    'KeyFrameTrajectory_ORB_VO_01' ...
    'KeyFrameTrajectory_ORB_VO_02' ...
    'KeyFrameTrajectory_ORB_VO_03' ...
    'KeyFrameTrajectory_ORB_VO_04' ...
    'KeyFrameTrajectory_ORB_VO_05' ...
    'KeyFrameTrajectory_ORB_VO_06' ...
    'KeyFrameTrajectory_ORB_VO_07' ...
    'KeyFrameTrajectory_ORB_VO_08' ...
    'KeyFrameTrajectory_ORB_VO_09' ...
    'KeyFrameTrajectory_ORB_VO_10' ...
    'KeyFrameTrajectory_ORB_VO_11' ...
    'KeyFrameTrajectory_ORB_VO_12' ...
    'KeyFrameTrajectory_ORB_VO_13' ...
    'KeyFrameTrajectory_ORB_VO_14' ...
    'KeyFrameTrajectory_ORB_VO_15' ...
    'KeyFrameTrajectory_ORB_VO_16' ...
    'KeyFrameTrajectory_ORB_VO_17' ...
    'KeyFrameTrajectory_ORB_VO_18' ...
    'KeyFrameTrajectory_ORB_VO_19' ...
    'KeyFrameTrajectory_ORB_VO_20' ...
    'KeyFrameTrajectory_ORB_VO_21' ...
    'KeyFrameTrajectory_ORB_VO_22' ...
    'KeyFrameTrajectory_ORB_VO_23' ...
    'KeyFrameTrajectory_ORB_VO_24' ...
    'KeyFrameTrajectory_ORB_VO_25' ...
    'KeyFrameTrajectory_ORB_VO_26' ...
    'KeyFrameTrajectory_ORB_VO_27' ...
    'KeyFrameTrajectory_ORB_VO_28' ...
    'KeyFrameTrajectory_ORB_VO_29' ...
    'KeyFrameTrajectory_ORB_VO_30' ...
    'KeyFrameTrajectory_ORB_VO_31' ...
    'KeyFrameTrajectory_ORB_VO_32' ...
    'KeyFrameTrajectory_ORB_VO_33' ...
    'KeyFrameTrajectory_ORB_VO_34' ...
    'KeyFrameTrajectory_ORB_VO_35' ...
    'KeyFrameTrajectory_ORB_VO_36' ...
    'KeyFrameTrajectory_ORB_VO_37' ...
    'KeyFrameTrajectory_ORB_VO_38' ...
    'KeyFrameTrajectory_ORB_VO_39' ...
    'KeyFrameTrajectory_ORB_VO_40' ...
    'KeyFrameTrajectory_ORB_VO_41' ...
    'KeyFrameTrajectory_ORB_VO_42' ...
    'KeyFrameTrajectory_ORB_VO_43' ...
    'KeyFrameTrajectory_ORB_VO_44' ...
    'KeyFrameTrajectory_ORB_VO_45' ...
    'KeyFrameTrajectory_ORB_VO_46' ...
    'KeyFrameTrajectory_ORB_VO_47' ...
    'KeyFrameTrajectory_ORB_VO_48' ...
    'KeyFrameTrajectory_ORB_VO_49' ...
    'KeyFrameTrajectory_ORB_VO_50' ...
    };
elseif (isequal(mode,'orb_slam'))
    names = {     ...
    'KeyFrameTrajectory_ORB_SLAM_01' ...
    'KeyFrameTrajectory_ORB_SLAM_02' ...
    'KeyFrameTrajectory_ORB_SLAM_03' ...
    'KeyFrameTrajectory_ORB_SLAM_04' ...
    'KeyFrameTrajectory_ORB_SLAM_05' ...
    'KeyFrameTrajectory_ORB_SLAM_06' ...
    'KeyFrameTrajectory_ORB_SLAM_07' ...
    'KeyFrameTrajectory_ORB_SLAM_08' ...
    'KeyFrameTrajectory_ORB_SLAM_09' ...
    'KeyFrameTrajectory_ORB_SLAM_10' ...
    'KeyFrameTrajectory_ORB_SLAM_11' ...
    'KeyFrameTrajectory_ORB_SLAM_12' ...
    'KeyFrameTrajectory_ORB_SLAM_13' ...
    'KeyFrameTrajectory_ORB_SLAM_14' ...
    'KeyFrameTrajectory_ORB_SLAM_15' ...
    'KeyFrameTrajectory_ORB_SLAM_16' ...
    'KeyFrameTrajectory_ORB_SLAM_17' ...
    'KeyFrameTrajectory_ORB_SLAM_18' ...
    'KeyFrameTrajectory_ORB_SLAM_19' ...
    'KeyFrameTrajectory_ORB_SLAM_20' ...
    'KeyFrameTrajectory_ORB_SLAM_21' ...
    'KeyFrameTrajectory_ORB_SLAM_22' ...
    'KeyFrameTrajectory_ORB_SLAM_23' ...
    'KeyFrameTrajectory_ORB_SLAM_24' ...
    'KeyFrameTrajectory_ORB_SLAM_25' ...
    'KeyFrameTrajectory_ORB_SLAM_26' ...
    'KeyFrameTrajectory_ORB_SLAM_27' ...
    'KeyFrameTrajectory_ORB_SLAM_28' ...
    'KeyFrameTrajectory_ORB_SLAM_29' ...
    'KeyFrameTrajectory_ORB_SLAM_30' ...
    'KeyFrameTrajectory_ORB_SLAM_31' ...
    'KeyFrameTrajectory_ORB_SLAM_32' ...
    'KeyFrameTrajectory_ORB_SLAM_33' ...
    'KeyFrameTrajectory_ORB_SLAM_34' ...
    'KeyFrameTrajectory_ORB_SLAM_35' ...
    'KeyFrameTrajectory_ORB_SLAM_36' ...
    'KeyFrameTrajectory_ORB_SLAM_37' ...
    'KeyFrameTrajectory_ORB_SLAM_38' ...
    'KeyFrameTrajectory_ORB_SLAM_39' ...
    'KeyFrameTrajectory_ORB_SLAM_40' ...
    'KeyFrameTrajectory_ORB_SLAM_41' ...
    'KeyFrameTrajectory_ORB_SLAM_42' ...
    'KeyFrameTrajectory_ORB_SLAM_43' ...
    'KeyFrameTrajectory_ORB_SLAM_44' ...
    'KeyFrameTrajectory_ORB_SLAM_45' ...
    'KeyFrameTrajectory_ORB_SLAM_46' ...
    'KeyFrameTrajectory_ORB_SLAM_47' ...
    'KeyFrameTrajectory_ORB_SLAM_48' ...
    'KeyFrameTrajectory_ORB_SLAM_49' ...
    'KeyFrameTrajectory_ORB_SLAM_50' ...
    };
elseif (isequal(mode,'our_slam'))
    names = {     ...
    'KeyFrameTrajectory_our_SLAM_1' ...
    'KeyFrameTrajectory_our_SLAM_2' ...
    'KeyFrameTrajectory_our_SLAM_3' ...
    'KeyFrameTrajectory_our_SLAM_4' ...
    'KeyFrameTrajectory_our_SLAM_5' ...
    'KeyFrameTrajectory_our_SLAM_6' ...
    'KeyFrameTrajectory_our_SLAM_7' ...
    'KeyFrameTrajectory_our_SLAM_8' ...
    'KeyFrameTrajectory_our_SLAM_9' ...
    'KeyFrameTrajectory_our_SLAM_10' ...
    'KeyFrameTrajectory_our_SLAM_11' ...
    'KeyFrameTrajectory_our_SLAM_12' ...
    'KeyFrameTrajectory_our_SLAM_13' ...
    'KeyFrameTrajectory_our_SLAM_14' ...
    'KeyFrameTrajectory_our_SLAM_15' ...
    'KeyFrameTrajectory_our_SLAM_16' ...
    'KeyFrameTrajectory_our_SLAM_17' ...
    'KeyFrameTrajectory_our_SLAM_18' ...
    'KeyFrameTrajectory_our_SLAM_19' ...
    'KeyFrameTrajectory_our_SLAM_20' ...
    'KeyFrameTrajectory_our_SLAM_21' ...
    'KeyFrameTrajectory_our_SLAM_22' ...
    'KeyFrameTrajectory_our_SLAM_23' ...
    'KeyFrameTrajectory_our_SLAM_24' ...
    'KeyFrameTrajectory_our_SLAM_25' ...
    'KeyFrameTrajectory_our_SLAM_26' ...
    'KeyFrameTrajectory_our_SLAM_27' ...
    'KeyFrameTrajectory_our_SLAM_28' ...
    'KeyFrameTrajectory_our_SLAM_29' ...
    'KeyFrameTrajectory_our_SLAM_30' ...
    'KeyFrameTrajectory_our_SLAM_31' ...
    'KeyFrameTrajectory_our_SLAM_32' ...
    'KeyFrameTrajectory_our_SLAM_33' ...
    'KeyFrameTrajectory_our_SLAM_34' ...
    'KeyFrameTrajectory_our_SLAM_35' ...
    'KeyFrameTrajectory_our_SLAM_36' ...
    'KeyFrameTrajectory_our_SLAM_37' ...
    'KeyFrameTrajectory_our_SLAM_38' ...
    'KeyFrameTrajectory_our_SLAM_39' ...
    'KeyFrameTrajectory_our_SLAM_40' ...
    'KeyFrameTrajectory_our_SLAM_41' ...
    'KeyFrameTrajectory_our_SLAM_42' ...
    'KeyFrameTrajectory_our_SLAM_43' ...
    'KeyFrameTrajectory_our_SLAM_44' ...
    'KeyFrameTrajectory_our_SLAM_45' ...
    'KeyFrameTrajectory_our_SLAM_46' ...
    'KeyFrameTrajectory_our_SLAM_47' ...
    'KeyFrameTrajectory_our_SLAM_48' ...
    'KeyFrameTrajectory_our_SLAM_49' ...
    'KeyFrameTrajectory_our_SLAM_50' ...
    };
elseif (isequal(mode,'our_vo'))
    names = {     ...
    'KeyFrameTrajectory_our_VO_1' ...
    'KeyFrameTrajectory_our_VO_2' ...
    'KeyFrameTrajectory_our_VO_3' ...
    'KeyFrameTrajectory_our_VO_4' ...
    'KeyFrameTrajectory_our_VO_5' ...
    'KeyFrameTrajectory_our_VO_6' ...
    'KeyFrameTrajectory_our_VO_7' ...
    'KeyFrameTrajectory_our_VO_8' ...
    'KeyFrameTrajectory_our_VO_9' ...
    'KeyFrameTrajectory_our_VO_10' ...
    'KeyFrameTrajectory_our_VO_11' ...
    'KeyFrameTrajectory_our_VO_12' ...
    'KeyFrameTrajectory_our_VO_13' ...
    'KeyFrameTrajectory_our_VO_14' ...
    'KeyFrameTrajectory_our_VO_15' ...
    'KeyFrameTrajectory_our_VO_16' ...
    'KeyFrameTrajectory_our_VO_17' ...
    'KeyFrameTrajectory_our_VO_18' ...
    'KeyFrameTrajectory_our_VO_19' ...
    'KeyFrameTrajectory_our_VO_20' ...
    'KeyFrameTrajectory_our_VO_21' ...
    'KeyFrameTrajectory_our_VO_22' ...
    'KeyFrameTrajectory_our_VO_23' ...
    'KeyFrameTrajectory_our_VO_24' ...
    'KeyFrameTrajectory_our_VO_25' ...
    'KeyFrameTrajectory_our_VO_26' ...
    'KeyFrameTrajectory_our_VO_27' ...
    'KeyFrameTrajectory_our_VO_28' ...
    'KeyFrameTrajectory_our_VO_29' ...
    'KeyFrameTrajectory_our_VO_30' ...
    'KeyFrameTrajectory_our_VO_31' ...
    'KeyFrameTrajectory_our_VO_32' ...
    'KeyFrameTrajectory_our_VO_33' ...
    'KeyFrameTrajectory_our_VO_34' ...
    'KeyFrameTrajectory_our_VO_35' ...
    'KeyFrameTrajectory_our_VO_36' ...
    'KeyFrameTrajectory_our_VO_37' ...
    'KeyFrameTrajectory_our_VO_38' ...
    'KeyFrameTrajectory_our_VO_39' ...
    'KeyFrameTrajectory_our_VO_40' ...
    'KeyFrameTrajectory_our_VO_41' ...
    'KeyFrameTrajectory_our_VO_42' ...
    'KeyFrameTrajectory_our_VO_43' ...
    'KeyFrameTrajectory_our_VO_44' ...
    'KeyFrameTrajectory_our_VO_45' ...
    'KeyFrameTrajectory_our_VO_46' ...
    'KeyFrameTrajectory_our_VO_47' ...
    'KeyFrameTrajectory_our_VO_48' ...
    'KeyFrameTrajectory_our_VO_49' ...
    'KeyFrameTrajectory_our_VO_50' ...
    };
end

names2 = {     ...
'sequence_01' ...
'sequence_02' ...
'sequence_03' ...
'sequence_04' ...
'sequence_05' ...
'sequence_06' ...
'sequence_07' ...
'sequence_08' ...
'sequence_09' ...
'sequence_10' ...
'sequence_11' ...
'sequence_12' ...
'sequence_13' ...
'sequence_14' ...
'sequence_15' ...
'sequence_16' ...
'sequence_17' ...
'sequence_18' ...
'sequence_19' ...
'sequence_20' ...
'sequence_21' ...
'sequence_22' ...
'sequence_23' ...
'sequence_24' ...
'sequence_25' ...
'sequence_26' ...
'sequence_27' ...
'sequence_28' ...
'sequence_29' ...
'sequence_30' ...
'sequence_31' ...
'sequence_32' ...
'sequence_33' ...
'sequence_34' ...
'sequence_35' ...
'sequence_36' ...
'sequence_37' ...
'sequence_38' ...
'sequence_39' ...
'sequence_40' ...
'sequence_41' ...
'sequence_42' ...
'sequence_43' ...
'sequence_44' ...
'sequence_45' ...
'sequence_46' ...
'sequence_47' ...
'sequence_48' ...
'sequence_49' ...
'sequence_50'};




n = size(names,2);


s = {};

for i=1:n
    %statistics = importdata([ supplementaryFolder '/statisticsFiles/' names{i} '.txt']);
    s{i}.name = names{i};
    %s{i}.align = statistics(6:7);
    %s{i}.eval = statistics(8:9);
    s{i}.mocapRaw = importdata([ path_gt names2{i} '.txt']);
end

LOOPdataset.sequences=s;
LOOPdataset.LOOPerrT = zeros(size(s,2), 10);
LOOPdataset.LOOPerrR = zeros(size(s,2), 10);
LOOPdataset.LOOPerrS = zeros(size(s,2), 10);
LOOPdataset.LOOPerrRMSE = zeros(size(s,2), 10);
LOOPdataset.LOOPabserrA = zeros(size(s,2), 10);
LOOPdataset.LOOPabserrE = zeros(size(s,2), 10);
LOOPdataset.LOOPNKF = zeros(size(s,2), 10);
LOOPdataset.nLoopClosures = zeros(size(s,2), 10);

%%
progress = 1;
for oi=1:10
for si=1:size(s,2)
%    try

        fle = [path_result s{si}.name '-' num2str(oi) '.txt'];

        if(LOOPdataset.LOOPabserrE(si,oi) > 0 || isnan(LOOPdataset.LOOPabserrE(si,oi)))
%             disp(['EXISTS ' fle])
            continue;
        end

        if(~exist(fle))
%             disp(['SKIP ' fle])
            continue;
        end

          disp(fle)
        [rmse, ~, errAlign, errR, errS, abserrA, abserrE, nkf, nLoopClosures] = efficientEvalDrift(fle, s{si},0,oi);

        
        %[s{si}.name ' with ' num2str(options(oi)) ' : ' num2str(abserrA) ' TO ' num2str(abserrE) ';  eT ' num2str(errAlign) ' eR ' num2str(errR) ' eS ' num2str(errS)]

%         if(progress < 10*size(s,2))
%             fprintf('\b\b\b\b\b\b\b\b');
%         end
        
%         disp([num2str(progress/(10*size(s,2))*100) '% '])
        progress = progress+1;
        

        LOOPdataset.LOOPerrT(si,oi) = errAlign;
        LOOPdataset.LOOPerrRMSE(si,oi) = rmse;
        LOOPdataset.LOOPerrR(si,oi) = errR;
        LOOPdataset.LOOPerrS(si,oi) = errS;
        LOOPdataset.LOOPabserrA(si,oi) = abserrA;
        LOOPdataset.LOOPabserrE(si,oi) = abserrE;
        LOOPdataset.LOOPNKF(si,oi) = nkf;
        LOOPdataset.nLoopClosures(si,oi) = nLoopClosures;
%    catch
%        'ERROR'
%    end
end        
end

end

